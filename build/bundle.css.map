{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script>\n    import { fly } from \"svelte/transition\";\n    import { onMount } from \"svelte\";\n    import Canvas from \"./Canvas.svelte\";\n    import QuadTreeImp from \"./QuadTreeImp\";\n    import {image as imageContext} from \"./imageStore\";\n\n    console.log(imageContext);\n\n    let arrow = \"/image/pngtree-arrow-sketch-2902205-png-image_1733937.png\";\n\n    let disabled = true;\n    let max = 10;\n    let min = 0;\n    let level = 0;\n\n    let image = new Image(600, 600);\n    image.addEventListener('load', execute);\n    let baseCanvasCTX;\n    imageContext.subscribe( value => {\n        baseCanvasCTX = value;\n    });\n\n    let compressed;\n\n    let compressedCanvas;\n\n    let compressedCanvasCTX;\n    onMount(() => {\n        compressedCanvasCTX = compressedCanvas.getContext(\"2d\");\n    })\n\n    function execute() {\n        console.log(baseCanvasCTX);\n        baseCanvasCTX.drawImage(image, 0, 0, image.width, image.height);\n\n        compressed = new QuadTreeImp(baseCanvasCTX.getImageData(0, 0, 600, 600),\n            image.width,\n            image.height,\n            1).root;\n        console.log(compressed);\n\n        handleDrawQuadTree(0, parseInt(level));        \n    }\n\n    function run(e) {\n        console.log(e);\n        if (e.target.files.length === 0)\n            return;\n\n        disabled = false;\n        image.src = URL.createObjectURL(e.target.files[0]);\n        let x = (baseCanvasCTX.width - image.width) * 0.5,\n            y = (baseCanvasCTX.height - image.height) * 0.5;\n    }\n\n    function handleDrawQuadTree(start, level) {\n        if (level === 9) {\n            getNodesInLevel(compressed, 0, level - 1, 10);\n            getNodesInLevel(compressed, 0, level, 10);\n        } else {\n            getNodesInLevel(compressed, 0, level, 10);\n        }\n    }\n\n    function getNodesInLevel(node, start, level) {\n        if (node === undefined) return;\n        if (start === level) {\n            compressedCanvasCTX.moveTo(node.x, node.y);\n            compressedCanvasCTX.fillStyle = RGBAToHexA(node.color.red, node.color.green, node.color.blue, node.color.alpha);\n            compressedCanvasCTX.fillRect(node.x, node.y, node.width, node.height);\n        } else if (start < level) {\n            getNodesInLevel(node.nodes[0], start + 1, level);\n            getNodesInLevel(node.nodes[1], start + 1, level);\n            getNodesInLevel(node.nodes[2], start + 1, level);\n            getNodesInLevel(node.nodes[3], start + 1, level);\n        }\n    }\n\n    function RGBAToHexA(r, g, b, a) {\n        r = r.toString(16);\n        g = g.toString(16);\n        b = b.toString(16);\n        a = Math.round(a).toString(16);\n\n        if (r.length === 1)\n            r = \"0\" + r;\n        if (g.length === 1)\n            g = \"0\" + g;\n        if (b.length === 1)\n            b = \"0\" + b;\n        if (a.length === 1)\n            a = \"0\" + a;\n\n        return \"#\" + r + g + b + a;\n    }\n\n    function handleDrawQuadTreeByRange(e) {\n        console.log(\"change\")\n        if (level === 10) {\n            getNodesInLevel(compressed, 0, level - 1, 10);\n            getNodesInLevel(compressed, 0, level, 10);\n        } else {\n            getNodesInLevel(compressed, 0, level, 10);\n        }\n    }\n\n </script>\n\n<svelte:head>\n\t<title>QuadTree Image Compression</title>\n</svelte:head>\n\n<div class=\"container\">\n\t<div class=\"canvas-container\">\n\t\t<h3>Click below to upload image</h3>\n\t\t<Canvas />\n\t</div>\n\t<div class=\"range\">\n\t\t<span>QuadTree Image Compression</span>\n\t\t<div>\n\t\t\t<span>\n                Current level = <span id=\"levelSpan\" transition:fly={{y: 500, duration: 300}}>{level}</span>\n            </span>\n\t\t\t<input id=\"range\" type=\"range\" min={min} max={max} bind:value={level} disabled={disabled} autocomplete=\"off\" on:input={handleDrawQuadTreeByRange}>\n\t\t</div>\n\t</div>\n\t<input id=\"file\" type=\"file\" on:change={run}>\n\t<div class=\"canvas-container\">\n\t\t<h3>Output</h3>\n\t\t<canvas bind:this={compressedCanvas} id=\"quadtree\" width=\"600\" height=\"600\"></canvas>\n\t</div>\n</div>\n\n<style>\n    :global(*) {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n\n    :global(html, body) {\n        height: 100%;\n    }\n\n\t:global(body) {\n\t\tfont-family: \"Andale Mono\",serif, Arial, Helvetica, sans-serif;\n\t\tcolor: white;\n\t\tfont-size: 14px;\n\t\t/*margin: 40px;*/\n\t\tbackground-color: rgb(18, 18, 18);\n\t}\n\n    :global(canvas) {\n        background: rgb(29, 29, 29);\n        box-shadow: 0 0 30px rgba(0, 0, 0, .15);\n        margin-top: 20px;\n        border-radius: 10px;\n    }\n\n    #file {\n        display: none;\n    }\n\n    .container {\n        display: flex;\n        padding: 100px;\n        width: 100%;\n        height: 100%;\n        justify-content: space-between;\n        align-items: center;\n        background-image: url(\"/image/pngtree-arrow-sketch-2902205-png-image_1733937.png\");\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: 200px;\n    }\n\n    .range {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        align-items: center;\n        height: 450px;\n    }\n\n    .range > div {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .canvas-container {\n        height: 650px;\n        width: 600px;\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n    }\n\n    #range {\n        margin-top: 20px;\n    }\n</style>"
  ],
  "names": [],
  "mappings": "AAuIY,CAAC,AAAE,CAAC,AACR,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,UAAU,AAC1B,CAAC,AAEO,UAAU,AAAE,CAAC,AACjB,MAAM,CAAE,IAAI,AAChB,CAAC,AAEI,IAAI,AAAE,CAAC,AACd,WAAW,CAAE,aAAa,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,UAAU,CAC9D,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,IAAI,CAEf,gBAAgB,CAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,AAClC,CAAC,AAEU,MAAM,AAAE,CAAC,AACb,UAAU,CAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAC3B,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACvC,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,KAAK,4BAAC,CAAC,AACH,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,UAAU,4BAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,gBAAgB,CAAE,IAAI,2DAA2D,CAAC,CAClF,iBAAiB,CAAE,SAAS,CAC5B,mBAAmB,CAAE,MAAM,CAC3B,eAAe,CAAE,KAAK,AAC1B,CAAC,AAED,MAAM,4BAAC,CAAC,AACJ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,KAAK,AACjB,CAAC,AAED,oBAAM,CAAG,GAAG,cAAC,CAAC,AACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,AAC1B,CAAC,AAED,iBAAiB,4BAAC,CAAC,AACf,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,MAAM,AAC1B,CAAC,AAED,MAAM,4BAAC,CAAC,AACJ,UAAU,CAAE,IAAI,AACpB,CAAC"
}